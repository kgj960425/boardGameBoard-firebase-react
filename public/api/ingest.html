<!DOCTYPE html>
<html>
  <head><title>Ingest API</title></head>
  <body>
    <script>
      async function ingest() {
        try {
          // 1. Supabase APIì—ì„œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
          const response = await fetch("https://your-supabase.com/api", {
            method: "POST",
            headers: {
              "Authorization": "Bearer your-secret"
            }
          });

          const data = await response.json();

          // 2. Firebase Firestoreì— REST APIë¡œ ì €ì¥
          await fetch("https://firestore.googleapis.com/v1/projects/YOUR_PROJECT_ID/databases/(default)/documents/product", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
              "Authorization": "Bearer YOUR_FIREBASE_ID_TOKEN" // ë¡œê·¸ì¸ í›„ í† í° ë„£ê¸°
            },
            body: JSON.stringify({
              fields: {
                name: { stringValue: data.name },
                pay: { integerValue: data.pay }
              }
            })
          });

          document.body.innerText = "Ingest ì™„ë£Œ!";
        } catch (e) {
          console.error(e);
          document.body.innerText = "ì‹¤íŒ¨ ğŸ˜¢";
        }
      }

      ingest();
    </script>
  </body>
</html>
